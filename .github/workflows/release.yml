name: Release

on:
  push:
    branches:
      - master

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout the code
        uses: actions/checkout@v2
      - name: Build the app
        run: ./gradlew build
      - name: Successful Discord notification
        uses: sarisia/actions-status-discord@v1
        if: ${{ success() }}
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK }}
          title: "Application Build"
          description: "The application was built successfully"
      - name: Failed Discord notification
          uses: sarisia/actions-status-discord@v1
          if: ${{ failure() }}
          with:
            webhook: ${{ secrets.DISCORD_WEBHOOK }}
            title: "Application Build"
            description: "The application build failed"
